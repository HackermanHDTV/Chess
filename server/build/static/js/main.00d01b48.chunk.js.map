{"version":3,"sources":["components/contexts/UserContext.js","assets/user.svg","assets/lock.svg","components/auth/Login.js","components/auth/Signup.js","components/dashboard/Dashboard.js","components/NavBar.js","assets/logo.jpeg","components/routes/PrivateRoute.js","components/routes/PublicRoute.js","components/routes/NavRoute.js","components/chess/moves/util/canOccupy.js","components/chess/moves/util/canCapture.js","components/chess/moves/util/notation.js","components/chess/moves/util/idToCoordinates.js","components/chess/moves/pieceMoves/pawnMoves.js","components/chess/newPosition.js","components/chess/moves/isInCheck.js","components/chess/moves/causesCheck.js","components/chess/moves/pieceMoves/knightMoves.js","components/chess/moves/util/traversePath.js","components/chess/moves/pieceMoves/bishopMoves.js","components/chess/moves/pieceMoves/rookMoves.js","components/chess/moves/pieceMoves/legalMoves.js","components/chess/moves/pieceMoves/kingMoves.js","components/chess/moves/pieceMoves/queenMoves.js","components/chess/parseFen.js","components/chess/moves/util/createFen.js","components/chess/moves/moveNotation.js","components/contexts/ChessContext.js","assets/black-pawn.svg","components/chess/chess-components/pieces.js","assets/black-rook.svg","assets/black-knight.svg","assets/black-bishop.svg","assets/black-king.svg","assets/black-queen.svg","assets/white-pawn.svg","assets/white-rook.svg","assets/white-knight.svg","assets/white-bishop.svg","assets/white-king.svg","assets/white-queen.svg","components/chess/moves/util/findColor.js","components/chess/chess-components/Piece.js","components/chess/chess-components/Board.js","components/chess/chess-components/Details.js","components/chess/moves/isMate.js","components/chess/chess-components/PlayOnline.js","assets/loading.svg","components/Loading.js","components/chess/chess-components/Time.js","components/chess/chess-components/PlayLocal.js","components/chess/chess-components/Analysis.js","components/dashboard/Profile.js","components/contexts/SocketContext.js","components/routes/PrivateSocket.js","components/App.js","index.js"],"names":["require","config","UserContext","React","createContext","useUser","useContext","UserProvider","children","useState","user","setUser","history","useHistory","useEffect","loggedInUserId","localStorage","getItem","Axios","method","params","id","url","process","then","res","data","push","catch","e","console","error","value","setLocalUser","setItem","_id","logout","Provider","Login","usernameRef","useRef","passwordRef","setError","isLoading","setIsLoading","current","focus","className","onSubmit","preventDefault","username","password","err","src","userLogo","alt","ref","placeholder","required","lock","type","disabled","to","confirmPasswordRef","Dashboard","Header","isOpen","setIsOpen","onClick","PrivateRoute","Component","component","rest","render","props","PublicRoute","NavRoute","canOccupy","file","rank","position","findElement","isEmpty","canCapture","color","piece","toLowerCase","toUpperCase","findColor","isOppositeColor","notation","idToCoordinates","charCodeAt","parseInt","charAt","pawnMoves","element","enPassantSquare","square","legalMoves","move","isCapture","isCastle","isEnPassant","isPawnMove","newEnPassantSquare","Math","abs","enPassantCapture","newPosition","moveObj","i","j","targetFile","targetRank","enpfile","enprank","castleType","castleColor","isInCheck","search","findIndex","row","includes","indexOf","exists","inCheck","pieces","forEach","path","clearPath","moves","f","r","fileChange","rankChange","causesCheck","knightMoves","traversePath","successfulMoves","bishopMoves","concat","rookMoves","colorToMove","castlingRights","rootSquare","kingCastle","queenCastle","newCastlingRights","replace","kingMoves","queenMoves","log","filter","parseFENPosition","FEN","split","map","row2","length","k","parseFen","fen","values","toMove","fiftyMoveRuleCount","moveCount","legalMoveElements","selectedElement","createFen","state","count","positionToFen","fiftyMoveCount","moveNotation","ChessContext","DEFAULT_FEN","useChess","INITIAL_LOCAL_STATE","highlightedElements","legalMoveObjects","moveList","displayedFEN","isLocal","whiteTime","blackTime","INITIAL_ONLINE_STATE","isOnline","played","latestMoveObj","INITIAL_ANALYSIS_STATE","isAnalysis","ChessProvider","useReducer","action","payload","onlineColor","emitMove","isBranch","getLegalMoves","slice","currentIdx","resultingPosition","nextMove","newMoveCount","newFifty","newFEN","dispatch","p","n","b","q","P","R","N","B","K","Q","Piece","boardRef","pieceRef","isClicked","setIsClicked","startLocation","setStartLocation","onContextMenu","style","transform","find","draggable","onMouseDown","target","classList","add","onMouseUp","remove","targetSquare","document","elementsFromPoint","clientX","clientY","contains","width","translateTarget","onMouseMove","board","querySelector","boardX","offsetLeft","boardY","offsetTop","mouseX","mouseY","x","y","Board","rowIdx","colIdx","handleRightClick","handleClick","Details","obj","idx","Fragment","isMate","reverse","join","idx1","idx2","PlayOnline","alert","Loading","loading","format","time","hrs","mins","secs","ret","Time","PlayLocal","whiteTimer","setWhiteTimer","blackTimer","setBlackTimer","setWhiteTime","setBlackTime","whiteDecrement","t","blackDecrement","whiteTimerVar","setInterval","blackTimerVar","moveStart","clearInterval","Analysis","Profile","SocketContext","SocketProvider","socket","setSocket","roomID","setRoomID","playMove","emit","newSocket","io","query","close","on","PrivateSocket","App","Signup","exact","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.00d01b48.chunk.js","sourcesContent":["import Axios from 'axios'\r\nimport React, { useEffect, useContext, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nrequire('dotenv').config()\r\n\r\nconst UserContext = React.createContext()\r\n\r\nexport function useUser() {\r\n  return useContext(UserContext)\r\n}\r\n\r\nexport function UserProvider({ children }) {\r\n  const [user, setUser] = useState()\r\n  const history = useHistory()\r\n\r\n  function setLocalUser(user) {\r\n    setUser(user)\r\n    localStorage.setItem('userid', user._id)\r\n  }\r\n\r\n  function logout() {\r\n    setUser()\r\n    localStorage.setItem('userid', '')\r\n  }\r\n\r\n  useEffect(() => {\r\n    const loggedInUserId = localStorage.getItem('userid')\r\n    if (\r\n      loggedInUserId &&\r\n      loggedInUserId !== 'undefined' &&\r\n      loggedInUserId !== 'null' &&\r\n      loggedInUserId !== ''\r\n    ) {\r\n      Axios({\r\n        method: 'GET',\r\n        params: { id: loggedInUserId },\r\n        url: `${process.env.REACT_APP_SERVER_URL}/api/user`,\r\n      })\r\n        .then((res) => {\r\n          setUser(res.data)\r\n          history.push('/')\r\n        })\r\n        .catch((e) => console.error(e))\r\n    }\r\n  }, [history])\r\n\r\n  const value = {\r\n    user,\r\n    setLocalUser,\r\n    logout,\r\n  }\r\n\r\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>\r\n}\r\n","export default __webpack_public_path__ + \"static/media/user.a296afc6.svg\";","export default __webpack_public_path__ + \"static/media/lock.659e94a4.svg\";","import React, { useState, useRef, useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nimport { useUser } from '../contexts/UserContext'\r\n\r\nimport userLogo from '../../assets/user.svg'\r\nimport lock from '../../assets/lock.svg'\r\nrequire('dotenv').config()\r\n\r\nexport default function Login() {\r\n  const usernameRef = useRef()\r\n  const passwordRef = useRef()\r\n  const [error, setError] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  const { setLocalUser } = useUser()\r\n  const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    usernameRef.current.focus()\r\n  }, [])\r\n\r\n  function clearFields() {\r\n    usernameRef.current.value = ''\r\n    passwordRef.current.value = ''\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n\r\n    Axios({\r\n      method: 'POST',\r\n      url: `${process.env.REACT_APP_SERVER_URL}/api/login`,\r\n      data: {\r\n        username: usernameRef.current.value,\r\n        password: passwordRef.current.value,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setLocalUser(res.data)\r\n        history.push('/')\r\n      })\r\n      .catch((err) => {\r\n        setError('Could not log in')\r\n        clearFields()\r\n        setIsLoading(false)\r\n        console.error(err)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <div className='login-form'>\r\n      <form onSubmit={handleSubmit}>\r\n        <span>Log In</span>\r\n        {error && <div className='error'>{error}</div>}\r\n        <div className='input-cont'>\r\n          <img src={userLogo} alt='' />\r\n          <input ref={usernameRef} placeholder='Username' required />\r\n        </div>\r\n        <div className='input-cont'>\r\n          <img src={lock} alt='' />\r\n          <input\r\n            type='password'\r\n            ref={passwordRef}\r\n            placeholder='Password'\r\n            required\r\n          />\r\n        </div>\r\n        <button disabled={isLoading} type='submit'>\r\n          Log In\r\n        </button>\r\n        <div className='prompt'>\r\n          Don't have an account?<Link to='/signup'> Sign up</Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport Axios from 'axios'\r\nimport { Link, useHistory } from 'react-router-dom'\r\n\r\nimport { useUser } from '../contexts/UserContext'\r\n\r\nimport user from '../../assets/user.svg'\r\nimport lock from '../../assets/lock.svg'\r\nrequire('dotenv').config()\r\n\r\nexport default function Login() {\r\n  const usernameRef = useRef()\r\n  const passwordRef = useRef()\r\n  const confirmPasswordRef = useRef()\r\n  const [error, setError] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  const { setLocalUser } = useUser()\r\n  const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    usernameRef.current.focus()\r\n  }, [])\r\n\r\n  function clearFields() {\r\n    usernameRef.current.value = ''\r\n    passwordRef.current.value = ''\r\n    confirmPasswordRef.current.value = ''\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n\r\n    if (passwordRef.current.value !== confirmPasswordRef.current.value) {\r\n      setError(\"Passwords don't match\")\r\n      setIsLoading(false)\r\n      return\r\n    }\r\n\r\n    Axios({\r\n      method: 'POST',\r\n      url: `${process.env.REACT_APP_SERVER_URL}/api/signup`,\r\n      data: {\r\n        username: usernameRef.current.value,\r\n        password: passwordRef.current.value,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setLocalUser(res.data)\r\n        history.push('/')\r\n      })\r\n      .catch((err) => {\r\n        setError('Could not sign up')\r\n        clearFields()\r\n        console.error(err)\r\n        setIsLoading(false)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <div className='signup-form'>\r\n      <form onSubmit={handleSubmit}>\r\n        <span>Sign Up</span>\r\n        {error && <div className='error'>{error}</div>}\r\n        <div className='input-cont'>\r\n          <img src={user} alt='' />\r\n          <input ref={usernameRef} placeholder='Username' required />\r\n        </div>\r\n        <div className='input-cont'>\r\n          <img src={lock} alt='' />\r\n          <input\r\n            type='password'\r\n            ref={passwordRef}\r\n            placeholder='Password'\r\n            required\r\n          />\r\n        </div>\r\n        <div className='input-cont'>\r\n          <img src={lock} alt='' />\r\n          <input\r\n            type='password'\r\n            ref={confirmPasswordRef}\r\n            placeholder='Confirm Password'\r\n            required\r\n          />\r\n        </div>\r\n        <button disabled={isLoading} type='submit'>\r\n          Sign Up\r\n        </button>\r\n        <div className='prompt'>\r\n          Already have an account?<Link to='/login'> Log In</Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useUser } from '../contexts/UserContext'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Dashboard() {\r\n  const { user } = useUser()\r\n  return (\r\n    <div className='dashboard'>\r\n      <div>\r\n        {user ? (\r\n          <p> {`Hi, ${user.username}`}! </p>\r\n        ) : (\r\n          <p>You are not Logged in</p>\r\n        )}\r\n      </div>\r\n      {user && (\r\n        <div className='prompt'>\r\n          Play a game? <Link to='/play-online'>Play Online</Link>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useUser } from \"./contexts/UserContext\";\r\n\r\nimport logo from \"../assets/logo.jpeg\";\r\n\r\nexport default function Header() {\r\n  const { user, logout } = useUser();\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  return (\r\n    <header className='header'>\r\n      <nav className='flex flex-ai-c flex-jc-sb'>\r\n        <Link to='/'>\r\n          <div className='header__logo flex flex-ai-c'>\r\n            <img src={logo} alt='' />\r\n            <div className='text'>Chess</div>\r\n          </div>\r\n        </Link>\r\n        {isOpen && (\r\n          <div className='header__dropdown'>\r\n            <ul>\r\n              <ul className='dropdown__links hide-for-desktop'>\r\n                <Link to='/play-online'>\r\n                  <li>Play Online</li>\r\n                </Link>\r\n                <Link to='/play-local'>\r\n                  <li>Pass & Play</li>\r\n                </Link>\r\n                <Link to='/analysis'>\r\n                  <li>Analysis Board</li>\r\n                </Link>\r\n                <Link to='/profile'>\r\n                  <li>Profile</li>\r\n                </Link>\r\n              </ul>\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        <div\r\n          className='header__menu hide-for-desktop'\r\n          onClick={() => setIsOpen(!isOpen)}\r\n        >\r\n          <span></span>\r\n          <span></span>\r\n          <span></span>\r\n        </div>\r\n\r\n        <ul className='header__links hide-for-mobile flex flex-jc-sb flex-ai-c'>\r\n          <Link to='/play-online'>\r\n            <li>Play Online</li>\r\n          </Link>\r\n          <Link to='/play-local'>\r\n            <li>Pass & Play</li>\r\n          </Link>\r\n          <Link to='/analysis'>\r\n            <li>Analysis Board</li>\r\n          </Link>\r\n          <Link to='/profile'>\r\n            <li>Profile</li>\r\n          </Link>\r\n        </ul>\r\n        {user ? (\r\n          <div\r\n            onClick={() => logout()}\r\n            className='header__button hide-for-mobile'\r\n          >\r\n            Log Out\r\n          </div>\r\n        ) : (\r\n          <div className='header__button hide-for-mobile'>\r\n            <Link to='/login'>Log In</Link>\r\n          </div>\r\n        )}\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0NDQ4NDQ0NDQ0NDg0NDQ0NDQ8NDQ0NFREWFhURFRUYHSgsGBolHRUVITEiJSkuLi8uFyI/ODMtNyg5LisBCgoKDg0OFxAPFSsdFR0rLSsrLS0tKysrLSstNy0rKy8rLS0tLSstKy0rLS0rListKy0rKystLisrKystKysrL//AABEIAOEA4QMBEQACEQEDEQH/xAAcAAEBAAIDAQEAAAAAAAAAAAAAAQIDBAUGBwj/xABGEAACAgACAwsGCgkFAQAAAAAAAQIDBBEFITEGEhNBUVNhcZKT0RUiUnORsSMyM2JygaGywdIHNEJDRFSUouEUJIKj8Bf/xAAbAQEBAAMBAQEAAAAAAAAAAAAAAQIDBAUGB//EADcRAQACAQEDCgQEBgMBAAAAAAABAgMRBDFRBRITFCFBUnGh0RUygZEiYbHwIyQzQsHhU2KSBv/aAAwDAQACEQMRAD8A+THc5wCgMwADMoZgMyABMwAUAgAABAIQAIAAAQgAAoBABBAAG8zQAAAgAAAAAUAAQAAAgEIAACACAUQgBQCACABAAG4zQAoAAAAAAIAAAAAEAgAgAQAAAhAABQCACCMAAA3GaAAAAAAAAAAAAgACEAAAAgACEAAFAIAIAEAAANpmigQABQAAAAAgAABCABAAAABCAACgRAoAIIwAAABsMkUAAKAAgFAAQQABsw1Fls1XVCdlktkIRcpP6lxdI01Y2tFY1tOkPVaP3A4qxKWItrwyeT3iXDWfXk0l7Wba4Zne8/Jynjr2UibekO0/+f4VJueKxCUVnKXwUIr+1mc4q1jW0uf4nkndWPVwLNyWDzyruxcvnSdUV9S3ngcl8lY3Qwnla8bqx6+6R3G0P99f/wBf5TRO0TwY/F8vgj1922O4nDv9/iPbV+UwnabcIT4xl8FfX3bFuGwz/f4n21flMZ2u3CD4xln+yvr7t1f6P8K/4jFe2r8hotyheP7Y9fdurynln+2PX3cmv9G+Ef8AEYv20/kOe3K2SP7Y9fd002y890erpd1G53RWjo714nGXYqSzhh4zo1ckrHvPNj9r4jfsm17VtE6xSsU49vp29rsx3tftmOx4w9ZuABAAgAAAINhmgAAAAAAAAAAdrud0FdpC3eQ8yqGTuuazjBci5ZPiRlWk2lz7TtNcFdZ7Z7o/fc+p6J0VhsDXweHhvc8t/Y9dlj5ZS4+rYjrrSI3Pnc2e+a2t59ocmdhsiGEQ6bTGJc7OCT8yp5P51nG31bDz899bflCXnuaK4nDaWmXJgjTMo3xRrmWLdVE03lnSNZc6mBxZLO7HV4/dTu6VW+w+AalYs42YnLOFb2NVr9p9OxdPF27Lybz9L5t3D3exs+zdmt3zqycpSlOcpSlJuUpSblKUntbb2s9uIiI0iNIdzAqhAAgAAAAEGZmgBQAABmAzAAANuDws77a6a1nZbJQiuLN8b6Frb6ixGs6QwveKVm1t0PsWicBVgsPDD1bIrOUn8ayb+NN9LO6lNI0fM5sts15vZunYbIhjENSs85da95np2M4h0liztm+Wyb/uZ4eWfxS5r75cmtHLaWtvgjVMo3RRrmUcqmJy5LOnHVz8PHWjhyWd+Or4NivlbfWWfeZ9dT5Y8oe/G6GkyUIAEAAAAAggGwzQAAAAAAAAAew/Rzg07rsTJfJRVdf05/GfWksv+R0bPXWZl5nKWTStaR39v2/fo91Ow7Yh5EQ0TsM4hnENPCa11oz0ZxDh5Zzk/nP3nzmafxW85cN98uTBHLMsG+CNUyxb64mq86QypGsubTE4slndjq5+HjrRw5LO/HV+fsX8rb62z77PtKfLHlD2I3NRVAIAAAABBAAGwyQKAAAAAAAAH0LcHFRwTa2zvsk/qUY/gd+yx+B4vKE65fKId7Ow64hyRDROwziGcQ1b/WusrOIeJq3RYjD32ptXVq63KE3rS371RlxfXmfP5scWtbzl35OT8WWsT8ttI7Y/zD1Wid0OFxOUVPgrH+7tyi2/mvY/ecOTFavk8baNgzYe3TWvGP3q72KOaZcLk0xObJZ0Y6ufTE4slnfjq5+HjrRw5LO/HV+d8Z8tb62377PuafLXyh6LUZKgAAAAEEAAAMzJAAAAAAAFAgHv9xs8sDH1lvvPU2SP4bx9tj+L9IdtOZ1xDmiGqUytkVaXZrDZFXzrFvO218tlj/uZ4N/mnzexT5Y8mpmLJ3u5/TWka5KvDuWIgttNqc60vpfse3I5doph01vPN/P972uOSo2y3Nx49bfl/nu+76Xo7SNc4x4ZKixrzlvnZUn0TyX2o8LJaJn8M6w27R/8htuCvOx6X/KN8fSd/wBNXe016k9Ti9kk84vqZxZJePGG+O3NvGkxxc6iGtHBks7MdX5wxny1vrbfvs/QMfyV8odbSZAAAACCAABACszNAAAABAAACgHuNyUssHH1lnvPW2P+n9XlbXH8X6Q7WczqaIq0zsDbFWiVhW2KvA2vOUnyyk/tPn7T2y9GNzAg99uQxld+H4JRjCynJTjFKKmuKzVy8fT1nzfKWO+LLzpnWtt3t++59ryLtlMmDo4iItXfp2a/n7/m710nn9K9mLt+BxNuHlnXLV+1B64S61+Im0Wjtcu2bHg2uumaus9098fX/G57DROLrxEd9Bb2UWlZW3m4PlT40+U87aK83t7nxO28mX2PJpPbSd0/vvfnLG/LXeut++z9Bx/JXyhxS0mYAABBAAAARQDMzQAAAAAAACAV7LcvLLCL6dnvPW2P+l9ZedtMa5HYzsOphFXHstyK21o407HJ5LNt6klrbZjMxEazudOPFNpitY1mWjQ+gY1ZWX5St2qG2Fb6eV/Z7z5uba7n23JnIlcWmXaI1v3R3R58Z9Iddum0dwc+HgvMsfnpbI2f595lWXncubB0WTp6R+G2/wDKf9/q67RePnhboX17YPXHPJTg9sX1mvaMFc+Ocdt0+k8Xj7NtFsGSMlN8escH1rAXV4mmF9T30LI5rlXLF9KeaPh81b4ck4774fb4dorlpF6z2S2ukwjK289ydF2ui+Fi2ZqM1y1t61+PWkL2i1ZiWjascZ8Vsc/Tz7nxLHL4e711332ffY/kr5R+j4Od7SZgAIIAAACKAQDMzQAAAAAAAAAer3Ozywq+nP3nrbH/AEvrLjzV1u5ll/IdS1o1VwnbLewWb2t8UVyt8SNeTLXHXnWnsduy7Jk2i8UxV1n9PN2VGHjUtXnSfxp8b6FyI8XaNptmnTdXg+75O5KxbHHO+bJ3z7cGbZoiHpTLViaY2wlXNZxksmvx6zKIc2fHTNScd41rLwmOwsqLJVy2x2PilHiaMnwG07PbZ8s47d3rHF6HcJp5YW//AE90ssPiJJJvZVc9Sl0J7H9R43LOwdPj6Skfjr6x/rfH2dvJm2dDfmWn8FvSX1J0dB8Xz30vPY8B0F57KLvheK+Vs9ZZ95n6Tj+SvlD4bJ88+ctRmxCCAAAAigEAEGZmgAAAAAAAAA9DoWeWHS+dP3nr7H/S+stdq6y7PB4Sdzz+LWvjTezqXKy7RtNcMdvbbg9Lk/kzJtduzsp3z7cZ/TvdpGMYR3layjx+lJ8rZ4uTLbLbnWl91smyYtlpzMce8+aMxiG+ZRsyiGqZYsziGuZdVp/R/D176K+FrzcfnR44/wDvxLo8flXY+sY+dWPx13fnHfHs8eYvkHLWk8V/NYn+ot8TT1bB/wAdf/Mezd0+Xxz9zyniv5rFf1FviTq2D/jr/wCY9jrGXxz93Ebz1vW3rb5Tc1AEAAABFAIAIAVkZsQCgAAAAAAAes3L6PVlCtseVSnJKKfnTeezoR0V2vosXMr836Pb5K5J61/EyfJw759o9XfznqSSUYx1RitSSOGZm06z2y+0x4646xWsaRDW2ZRBMo2ZRDVMsTOIa5lGZRDVMsczOIa5l5XdFo/g58LBeZY9fJGf+dvtMLV07Xy/Kmy9HfpKx+G3pP8At05g8oIIAAACKAAIAIAVCDM2MQAAAAAAAAB7Pcu/9pFfPsy9prtvfc8gz/Jx5y7VsRD1ZlGzKIa5liZxDXMo2ZRDVMsWZxDXMoZRDXMtWJpjbCVc1nGSyfR0rpLzdYc+alclJpbdLxGLw8qbJVy2xe3ikuJo5pjSdHyebDbFeaW7mkjUAABFAAEAEUAhAAzNjEAAAAAAAAAey3L/AKqvp2e8wne+25Dn+Tjzl2jZYh6kyjZnDVMo2ZRDXMsWZxDXMoZRDXMo2ZRDXMsWZRDXMur07gOGr38V8JWm1yyjxx8P8mGWmsaxvebt+z9LTnR80fo8ocrwAigACACAFQAQAAVmZsAoAAAAAAAAew3Mfqq+nZ7yaPs+RJ/lI85dqzKIelMo2ZRDXMsWzOIa5lGZRDXMo2ZRDXMsTKIa5lDLRrmUMohrmXl9PYHgp8JFfB2PXyRnxr69vtOTPj5s6xul4m2YOZbnRun9XVGhxAEAEAKhAABQgAZGxgAAAAAAAAAOdhNLYimG8rmlHNvJwi9b6w7sHKO0YKczHbSvlDb5fxfOR7uHgXVt+L7X4o+0Hl7Fc5Hu4+A50p8V2rxR9oTy7iucj3cfAvPlj8U2nxR9oPLuK9OPdx8C9JZPie0+L0g8uYrnI9iI6S3FPiO0eL0hPLmK9OPYiOltxT4hn8XpB5bxXprsR8C9Nfidez8fRPLeJ9NdiPgOnvxTrubj6Nd+lL7IuE5RcZbVvIktmtaNJYX2nJeNLT2eThGtzhACgEIAAKEACAZmxgAAAAAAAAbcLhp3TVdazk/YlyvkRa1m06QzpSbzpXe9dDRVEIRjwVcnFJOUoRcpPjbPUphpERE1ifo9C2CsVjSNzB4Gjmau7j4G3ocfhj7Ofm14I8FRzNXdx8B0GPwx9oY82OCPBUczV3cfAvQY/BH2hJiODH/RUczV3cfAvQY/BH2hjpHBHg6OZq7uPgOgx+CPtDGdGDwdPM1d3HwHQYvBH2hjLF4Snmq+xEvQYvBH2hixeFp5qvsRHQYvBH2hjMsXhauar7ER0GLwR9oSZl0uOwzqk/Qb81/geRtOCcVv+s7mdZ1cY52SEAAAChAAhFAMzYwAAAAAAypjvpxjsUpRj7XkWO2dFrGsxD1MNzWHT86dsujOMV9iO6Nlr3zL0ep443zMuyw+Grpjva4KC48tr63xnTSlaxpWG6ta0jSsaM2zNjMtNi4zOJc9474amzNplGGOrFsrGZYNhhMsWysZlg2GMyxbDGZYtlYzLCaTWTSae1PWiWrFo0mNYY6uFZo2p7N9Hqea+047bBindrDLpZh1eIrUJyitaTyzZ5WanMvNY7m+s6xq1mtkEAAQQKAMwMjYwAKBAGYFAzomlODeyM4t9SaLWdJhlWdJiXrXp/Cc4+7s8D0es4+PpL0p2nHxYvTuF5x93Z4F61i4+ksJ2inFi9OYXnH3c/AvWsXH0lhOenFi9N4bnH3c/AvW8XH0lhOWvFrlpjDcU33c/AyjbMPH0lqtaO5i9L4f032J+BeuYePpLCbMXpbD+m+xPwHXMPH0ljqxelaPTfYn4DruHj6SjF6Uo9N9iXgXruHj6Sx0lHpOj032JeA67h8XpKc2WL0lT6T7MvAddw+L0ljzJR6Rp9J9mXgOvYfF6SnMsnlCn0n2ZeA67h8XpPsnR2Y+UKvSfZl4F69g8XpPsnRW4OrxU1KyUlrTeri4jyM94vktau6XRSNKxEtRpZAEIoAAhAAzNjECAAAAAAAAAAFAAACEAAAABQgAAIQAoAAhAAZkGRsYhQzAZgAAAAAAEAAAAAAAUAEAABCAFAAEAEAARQDI2MAAAAAAAAAAAAAoAAEAAAAhACgDMAQAIAIAUIAGRsYgAAUAAAAQAAAAAAAAIQAoAAZgCCAAGZACgAgAAMjNiAAAAoAAAAABABFAAAAAzAAQgoEAZkAKACAAAAAKZoAAAAAAAFAgAAAAAAAgACkEAACCBVIoEQCgAAAK/9k=\"","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useUser } from '../contexts/UserContext'\r\nimport NavBar from '../NavBar'\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }) {\r\n  const { user } = useUser()\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return user ? (\r\n          <>\r\n            <NavBar />\r\n            <Component {...props} />\r\n          </>\r\n        ) : (\r\n          <Redirect to='/login' />\r\n        )\r\n      }}\r\n    ></Route>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { useUser } from '../contexts/UserContext'\r\n\r\nexport default function PublicRoute({ component: Component, ...rest }) {\r\n  const { user } = useUser()\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return user ? <Redirect to='/login' /> : <Component {...props} />\r\n      }}\r\n    ></Route>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Route } from 'react-router-dom'\r\nimport NavBar from '../NavBar'\r\n\r\nexport default function NavRoute({ component: Component, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return (\r\n          <>\r\n            <NavBar />\r\n            <Component {...props} />\r\n          </>\r\n        )\r\n      }}\r\n    ></Route>\r\n  )\r\n}\r\n","export default function canOccupy(file, rank, position) {\r\n  function isEmpty(file, rank) {\r\n    return findElement(file, rank) === ''\r\n  }\r\n\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n  if (isEmpty(file, rank, position)) {\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n","export default function canCapture(file, rank, color, position) {\r\n  function findColor(file, rank) {\r\n    let piece = findElement(file, rank)\r\n    if (piece === piece.toLowerCase()) {\r\n      return 'b'\r\n    }\r\n    if (piece === piece.toUpperCase()) {\r\n      return 'w'\r\n    }\r\n  }\r\n\r\n  function isEmpty(file, rank) {\r\n    return findElement(file, rank) === ''\r\n  }\r\n\r\n  function isOppositeColor(file, rank, color) {\r\n    return findColor(file, rank) !== color\r\n  }\r\n\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n  if (!isEmpty(file, rank) && isOppositeColor(file, rank, color)) {\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n","export default function notation(file, rank) {\r\n  let files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']\r\n  return `${files[file]}${8 - rank}`\r\n}\r\n","export default function idToCoordinates(id) {\r\n  return [id.charCodeAt(0) - 97, 8 - parseInt(id.charAt(1))]\r\n}\r\n","import canOccupy from '../util/canOccupy'\r\nimport canCapture from '../util/canCapture'\r\nimport notation from '../util/notation'\r\nimport idToCoordinates from '../util/idToCoordinates'\r\n\r\nexport default function pawnMoves(element, position, enPassantSquare) {\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n  function findColor(file, rank) {\r\n    let piece = findElement(file, rank)\r\n    if (piece === piece.toLowerCase()) {\r\n      return 'b'\r\n    }\r\n    if (piece === piece.toUpperCase()) {\r\n      return 'w'\r\n    }\r\n  }\r\n  let [file, rank] = idToCoordinates(element)\r\n  let legalMoves = []\r\n  let color = findColor(file, rank)\r\n\r\n  if (color === 'w') {\r\n    if (rank > 0 && canOccupy(file, rank - 1, position)) {\r\n      //Move one square forward\r\n      legalMoves.push({\r\n        move: [element, notation(file, rank - 1)],\r\n        isCapture: false,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: 'P',\r\n        isPawnMove: true,\r\n      })\r\n\r\n      //Move two squares forward\r\n      if (rank === 6 && canOccupy(file, 4, position)) {\r\n        if (file > 0 && canCapture(file - 1, 4, 'w', position)) {\r\n          legalMoves.push({\r\n            move: [element, notation(file, 4)],\r\n            isCapture: false,\r\n            isCastle: false,\r\n            isEnPassant: false,\r\n            piece: 'P',\r\n            isPawnMove: true,\r\n            newEnPassantSquare: notation(file, 5),\r\n          })\r\n        } else if (file < 7 && canCapture(file + 1, 4, 'w', position)) {\r\n          legalMoves.push({\r\n            move: [element, notation(file, 4)],\r\n            isCapture: false,\r\n            isCastle: false,\r\n            isEnPassant: false,\r\n            piece: 'P',\r\n            isPawnMove: true,\r\n            newEnPassantSquare: notation(file, 5),\r\n          })\r\n        } else {\r\n          legalMoves.push({\r\n            move: [element, notation(file, 4)],\r\n            isCapture: false,\r\n            isCastle: false,\r\n            isEnPassant: false,\r\n            piece: 'P',\r\n            isPawnMove: true,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    //Capture right\r\n    if (\r\n      file < 7 &&\r\n      rank > 0 &&\r\n      canCapture(file + 1, rank - 1, color, position)\r\n    ) {\r\n      legalMoves.push({\r\n        move: [element, notation(file + 1, rank - 1)],\r\n        isCapture: true,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: 'P',\r\n        isPawnMove: true,\r\n      })\r\n    }\r\n\r\n    //Capture left\r\n    if (\r\n      file > 0 &&\r\n      rank > 0 &&\r\n      canCapture(file - 1, rank - 1, color, position)\r\n    ) {\r\n      legalMoves.push({\r\n        move: [element, notation(file - 1, rank - 1)],\r\n        isCapture: true,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: 'P',\r\n        isPawnMove: true,\r\n      })\r\n    }\r\n  } else {\r\n    if (rank > 0 && canOccupy(file, rank + 1, position)) {\r\n      //Move one square forward\r\n      legalMoves.push({\r\n        move: [element, notation(file, rank + 1)],\r\n        isCapture: false,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: 'p',\r\n        isPawnMove: true,\r\n      })\r\n\r\n      //Move two squares forward\r\n      if (rank === 1 && canOccupy(file, 3, position)) {\r\n        if (file > 0 && canCapture(file - 1, 3, 'b', position)) {\r\n          legalMoves.push({\r\n            move: [element, notation(file, 3)],\r\n            isCapture: false,\r\n            isCastle: false,\r\n            isEnPassant: false,\r\n            piece: 'p',\r\n            isPawnMove: true,\r\n            newEnPassantSquare: notation(file, 2),\r\n          })\r\n        } else if (file < 7 && canCapture(file + 1, 3, 'b', position)) {\r\n          legalMoves.push({\r\n            move: [element, notation(file, 3)],\r\n            isCapture: false,\r\n            isCastle: false,\r\n            isEnPassant: false,\r\n            piece: 'p',\r\n            isPawnMove: true,\r\n            newEnPassantSquare: notation(file, 2),\r\n          })\r\n        } else {\r\n          legalMoves.push({\r\n            move: [element, notation(file, 3)],\r\n            isCapture: false,\r\n            isCastle: false,\r\n            isEnPassant: false,\r\n            piece: 'p',\r\n            isPawnMove: true,\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    //Capture right\r\n    if (\r\n      file > 0 &&\r\n      rank < 7 &&\r\n      canCapture(file - 1, rank + 1, color, position)\r\n    ) {\r\n      legalMoves.push({\r\n        move: [element, notation(file - 1, rank + 1)],\r\n        isCapture: true,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: 'p',\r\n        isPawnMove: true,\r\n      })\r\n    }\r\n\r\n    //Capture left\r\n    if (\r\n      file < 7 &&\r\n      rank < 7 &&\r\n      canCapture(file + 1, rank + 1, color, position)\r\n    ) {\r\n      legalMoves.push({\r\n        move: [element, notation(file + 1, rank + 1)],\r\n        isCapture: true,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: 'p',\r\n        isPawnMove: true,\r\n      })\r\n    }\r\n  }\r\n\r\n  //Handle en-passant\r\n  if (enPassantSquare !== '-') {\r\n    if (Math.abs(file - idToCoordinates(enPassantSquare)[0]) === 1) {\r\n      let square\r\n      if (idToCoordinates(enPassantSquare)[1] === 2) {\r\n        square = notation(idToCoordinates(enPassantSquare)[0], 3)\r\n      }\r\n      if (idToCoordinates(enPassantSquare)[1] === 5) {\r\n        square = notation(idToCoordinates(enPassantSquare)[0], 4)\r\n      }\r\n      legalMoves.push({\r\n        move: [element, enPassantSquare],\r\n        isCastle: false,\r\n        isCapture: true,\r\n        isEnPassant: true,\r\n        enPassantSquare: enPassantSquare,\r\n        enPassantCapture: square,\r\n        piece: color === 'w' ? 'P' : 'p',\r\n        isPawnMove: true,\r\n      })\r\n    }\r\n  }\r\n\r\n  return legalMoves\r\n}\r\n","import idToCoordinates from './moves/util/idToCoordinates'\r\n\r\nexport default function newPosition(moveObj, position) {\r\n  let move = moveObj.move\r\n  let newPosition = []\r\n  for (let i = 0; i < 8; i++) {\r\n    newPosition.push([])\r\n    for (let j = 0; j < 8; j++) {\r\n      newPosition[i].push(position[i][j])\r\n    }\r\n  }\r\n\r\n  let [targetFile, targetRank] = idToCoordinates(move[1])\r\n  let [file, rank] = idToCoordinates(move[0])\r\n\r\n  if (moveObj.isEnPassant) {\r\n    let [enpfile, enprank] = idToCoordinates(moveObj.enPassantCapture)\r\n    newPosition[targetRank][targetFile] = position[rank][file]\r\n    newPosition[rank][file] = ''\r\n    newPosition[enprank][enpfile] = ''\r\n  } else if (moveObj.isCastle) {\r\n    if (moveObj.castleType === 'O-O') {\r\n      if (moveObj.castleColor === 'w') {\r\n        newPosition[7][5] = 'R'\r\n        newPosition[7][7] = ''\r\n      }\r\n      if (moveObj.castleColor === 'b') {\r\n        newPosition[0][5] = 'r'\r\n        newPosition[0][7] = ''\r\n      }\r\n    }\r\n    if (moveObj.castleType === 'O-O-O') {\r\n      if (moveObj.castleColor === 'w') {\r\n        newPosition[7][3] = 'R'\r\n        newPosition[7][0] = ''\r\n      }\r\n      if (moveObj.castleColor === 'b') {\r\n        newPosition[0][3] = 'r'\r\n        newPosition[0][0] = ''\r\n      }\r\n    }\r\n    newPosition[targetRank][targetFile] = position[rank][file]\r\n    newPosition[rank][file] = ''\r\n  } else {\r\n    newPosition[targetRank][targetFile] = position[rank][file]\r\n    newPosition[rank][file] = ''\r\n  }\r\n  return newPosition\r\n}\r\n","export default function isInCheck(color, position) {\r\n  let search = color === 'w' ? 'K' : 'k'\r\n  let rank = position.findIndex((row) => row.includes(search))\r\n  let file = position[rank]?.indexOf(search)\r\n\r\n  //Pawn check\r\n  if (color === 'w') {\r\n    //Capture right\r\n    if (exists(file + 1, rank - 1) && findElement(file + 1, rank - 1) === 'p') {\r\n      return true\r\n    }\r\n\r\n    //Capture left\r\n    if (exists(file - 1, rank - 1) && findElement(file - 1, rank - 1) === 'p') {\r\n      return true\r\n    }\r\n  } else {\r\n    //Capture right\r\n    if (exists(file - 1, rank + 1) && findElement(file - 1, rank + 1) === 'P') {\r\n      return true\r\n    }\r\n\r\n    //Capture left\r\n    if (exists(file + 1, rank + 1) && findElement(file + 1, rank + 1) === 'P') {\r\n      return true\r\n    }\r\n  }\r\n\r\n  let inCheck = false\r\n\r\n  //Bishop check\r\n  let pieces = color === 'w' ? ['b', 'q'] : ['B', 'Q']\r\n  let paths = [\r\n    [1, 1],\r\n    [1, -1],\r\n    [-1, 1],\r\n    [-1, -1],\r\n  ]\r\n\r\n  paths.forEach((path) => {\r\n    if (!clearPath(file, rank, path[0], path[1], pieces)) {\r\n      inCheck = true\r\n      return\r\n    }\r\n  })\r\n\r\n  if (!inCheck) {\r\n    //Rook check\r\n    let pieces = color === 'w' ? ['r', 'q'] : ['R', 'Q']\r\n    let paths = [\r\n      [1, 0],\r\n      [-1, 0],\r\n      [0, 1],\r\n      [0, -1],\r\n    ]\r\n    paths.forEach((path) => {\r\n      if (!clearPath(file, rank, path[0], path[1], pieces)) {\r\n        inCheck = true\r\n        return\r\n      }\r\n    })\r\n  }\r\n\r\n  if (!inCheck) {\r\n    //Knight Check\r\n    let moves = [\r\n      [2, 1],\r\n      [2, -1],\r\n      [1, 2],\r\n      [1, -2],\r\n      [-1, 2],\r\n      [-1, -2],\r\n      [-2, 1],\r\n      [-2, -1],\r\n    ]\r\n\r\n    let piece = color === 'w' ? 'n' : 'N'\r\n\r\n    for (let i = 0; i < 8; i++) {\r\n      let f = file + moves[i][0]\r\n      let r = rank + moves[i][1]\r\n      if (!exists(f, r)) {\r\n        continue\r\n      }\r\n      if (findElement(f, r) === piece) {\r\n        inCheck = true\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!inCheck) {\r\n    //King check\r\n    let moves = [\r\n      [1, 1],\r\n      [0, 1],\r\n      [-1, 1],\r\n      [1, 0],\r\n      [-1, 0],\r\n      [1, -1],\r\n      [0, -1],\r\n      [-1, -1],\r\n    ]\r\n\r\n    let piece = color === 'w' ? 'k' : 'K'\r\n\r\n    for (let i = 0; i < 8; i++) {\r\n      let f = file + moves[i][0]\r\n      let r = rank + moves[i][1]\r\n      if (!exists(f, r)) {\r\n        continue\r\n      }\r\n      if (findElement(f, r) === piece) {\r\n        inCheck = true\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  return inCheck\r\n\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n\r\n  function clearPath(file, rank, fileChange, rankChange, pieces) {\r\n    let f = file + fileChange\r\n    let r = rank + rankChange\r\n\r\n    while (true) {\r\n      if (!exists(f, r)) {\r\n        break\r\n      }\r\n      if (pieces.includes(findElement(f, r))) {\r\n        return false\r\n      } else if (findElement(f, r) === '') {\r\n        f += fileChange\r\n        r += rankChange\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n    return true\r\n  }\r\n}\r\n\r\nfunction exists(file, rank) {\r\n  if (file >= 0 && file <= 7 && rank >= 0 && rank <= 7) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n","import newPosition from '../newPosition'\r\nimport isInCheck from './isInCheck'\r\n\r\nexport default function causesCheck(moveObj, color, position) {\r\n  return isInCheck(color, newPosition(moveObj, position))\r\n}\r\n","import notation from '../util/notation'\r\nimport idToCoordinates from '../util/idToCoordinates'\r\nimport canOccupy from '../util/canOccupy'\r\nimport canCapture from '../util/canCapture'\r\n\r\nexport default function knightMoves(element, position) {\r\n  function exists(file, rank) {\r\n    if (file >= 0 && file <= 7 && rank >= 0 && rank <= 7) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  function findColor(file, rank) {\r\n    let piece = findElement(file, rank)\r\n    if (piece === piece.toLowerCase()) {\r\n      return 'b'\r\n    }\r\n    if (piece === piece.toUpperCase()) {\r\n      return 'w'\r\n    }\r\n  }\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n\r\n  let [file, rank] = idToCoordinates(element)\r\n  let legalMoves = []\r\n\r\n  let moves = [\r\n    [2, 1],\r\n    [2, -1],\r\n    [1, 2],\r\n    [1, -2],\r\n    [-1, 2],\r\n    [-1, -2],\r\n    [-2, 1],\r\n    [-2, -1],\r\n  ]\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    let f = file + moves[i][0]\r\n    let r = rank + moves[i][1]\r\n    if (!exists(f, r)) {\r\n      continue\r\n    }\r\n    if (canOccupy(f, r, position)) {\r\n      legalMoves.push({\r\n        move: [element, notation(f, r)],\r\n        isCapture: false,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: findColor(file, rank) === 'w' ? 'N' : 'n',\r\n      })\r\n    }\r\n    if (canCapture(f, r, findColor(file, rank), position)) {\r\n      legalMoves.push({\r\n        move: [element, notation(f, r)],\r\n        isCapture: true,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        piece: findColor(file, rank) === 'w' ? 'N' : 'n',\r\n      })\r\n    }\r\n  }\r\n\r\n  return legalMoves\r\n}\r\n","import canOccupy from './canOccupy'\r\nimport canCapture from './canCapture'\r\nimport notation from './notation'\r\n\r\nfunction exists(file, rank) {\r\n  if (file >= 0 && file <= 7 && rank >= 0 && rank <= 7) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\nexport default function traversePath(\r\n  file,\r\n  rank,\r\n  fileChange,\r\n  rankChange,\r\n  color,\r\n  position\r\n) {\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n  let f = file + fileChange\r\n  let r = rank + rankChange\r\n\r\n  let successfulMoves = []\r\n\r\n  while (true) {\r\n    if (!exists(f, r)) {\r\n      break\r\n    }\r\n    if (canOccupy(f, r, position)) {\r\n      successfulMoves.push({\r\n        move: [notation(file, rank), notation(f, r)],\r\n        isCapture: false,\r\n        isEnPassant: false,\r\n        isCastle: false,\r\n        piece: findElement(file, rank),\r\n      })\r\n    } else if (canCapture(f, r, color, position)) {\r\n      successfulMoves.push({\r\n        move: [notation(file, rank), notation(f, r)],\r\n        isCapture: true,\r\n        isEnPassant: false,\r\n        isCastle: false,\r\n        piece: findElement(file, rank),\r\n      })\r\n      break\r\n    } else {\r\n      break\r\n    }\r\n\r\n    f += fileChange\r\n    r += rankChange\r\n  }\r\n\r\n  return successfulMoves\r\n}\r\n","import traversePath from '../util/traversePath'\r\nimport idToCoordinates from '../util/idToCoordinates'\r\n\r\nexport default function bishopMoves(element, position) {\r\n  function findColor(file, rank) {\r\n    let piece = findElement(file, rank)\r\n    if (piece === piece.toLowerCase()) {\r\n      return 'b'\r\n    }\r\n    if (piece === piece.toUpperCase()) {\r\n      return 'w'\r\n    }\r\n  }\r\n\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n\r\n  let [file, rank] = idToCoordinates(element)\r\n  let legalMoves = []\r\n\r\n  let paths = [\r\n    [1, 1],\r\n    [-1, 1],\r\n    [1, -1],\r\n    [-1, -1],\r\n  ]\r\n\r\n  paths.forEach((path) => {\r\n    legalMoves = legalMoves.concat(\r\n      traversePath(\r\n        file,\r\n        rank,\r\n        path[0],\r\n        path[1],\r\n        findColor(file, rank),\r\n        position\r\n      )\r\n    )\r\n  })\r\n\r\n  return legalMoves\r\n}\r\n","import idToCoordinates from '../util/idToCoordinates'\r\nimport traversePath from '../util/traversePath'\r\n\r\nexport default function rookMoves(element, position) {\r\n  function findColor(file, rank) {\r\n    let piece = findElement(file, rank)\r\n    if (piece === piece.toLowerCase()) {\r\n      return 'b'\r\n    }\r\n    if (piece === piece.toUpperCase()) {\r\n      return 'w'\r\n    }\r\n  }\r\n\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n\r\n  let [file, rank] = idToCoordinates(element)\r\n  let legalMoves = []\r\n\r\n  let paths = [\r\n    [1, 0],\r\n    [-1, 0],\r\n    [0, 1],\r\n    [0, -1],\r\n  ]\r\n\r\n  paths.forEach((path) => {\r\n    legalMoves = legalMoves.concat(\r\n      traversePath(\r\n        file,\r\n        rank,\r\n        path[0],\r\n        path[1],\r\n        findColor(file, rank),\r\n        position\r\n      )\r\n    )\r\n  })\r\n\r\n  return legalMoves\r\n}\r\n","import pawnMoves from './pawnMoves'\r\nimport kingMoves from './kingMoves'\r\nimport knightMoves from './knightMoves'\r\nimport bishopMoves from './bishopMoves'\r\nimport rookMoves from './rookMoves'\r\nimport queenMoves from './queenMoves'\r\nimport idToCoordinates from '../util/idToCoordinates'\r\nimport causesCheck from '../causesCheck'\r\n\r\nexport default function legalMoves(\r\n  position,\r\n  colorToMove,\r\n  castlingRights,\r\n  enPassantSquare,\r\n  rootSquare\r\n) {\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n\r\n  function moves(element) {\r\n    let [file, rank] = idToCoordinates(element)\r\n    let piece = findElement(file, rank)\r\n    let moves = []\r\n    switch (piece.toLowerCase()) {\r\n      case 'p':\r\n        moves = pawnMoves(element, position, enPassantSquare)\r\n        break\r\n      case 'r':\r\n        moves = rookMoves(element, position)\r\n        break\r\n      case 'n':\r\n        moves = knightMoves(element, position)\r\n        break\r\n      case 'b':\r\n        moves = bishopMoves(element, position)\r\n        break\r\n      case 'k':\r\n        moves = kingMoves(element, position, castlingRights)\r\n        break\r\n      case 'q':\r\n        moves = queenMoves(element, position)\r\n        break\r\n      default:\r\n        console.log('default case')\r\n    }\r\n\r\n    return moves\r\n  }\r\n\r\n  let rawMoveList = moves(rootSquare).filter(\r\n    (moveObj) => !causesCheck(moveObj, colorToMove, position)\r\n  )\r\n\r\n  return rawMoveList\r\n}\r\n","import notation from '../util/notation'\r\nimport idToCoordinates from '../util/idToCoordinates'\r\nimport canOccupy from '../util/canOccupy'\r\nimport causesCheck from '../causesCheck'\r\nimport canCapture from '../util/canCapture'\r\n\r\nexport default function kingMoves(element, position, castlingRights) {\r\n  function exists(file, rank) {\r\n    if (file >= 0 && file <= 7 && rank >= 0 && rank <= 7) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  function findColor(file, rank) {\r\n    let piece = findElement(file, rank)\r\n    if (piece === piece.toLowerCase()) {\r\n      return 'b'\r\n    }\r\n    if (piece === piece.toUpperCase()) {\r\n      return 'w'\r\n    }\r\n  }\r\n  function findElement(file, rank) {\r\n    return position[rank][file]\r\n  }\r\n\r\n  let [file, rank] = idToCoordinates(element)\r\n  let legalMoves = []\r\n\r\n  let moves = [\r\n    [1, 1],\r\n    [0, 1],\r\n    [-1, 1],\r\n    [1, 0],\r\n    [-1, 0],\r\n    [1, -1],\r\n    [0, -1],\r\n    [-1, -1],\r\n  ]\r\n\r\n  const kingCastle = findColor(file, rank) === 'w' ? 'K' : 'k'\r\n  const queenCastle = findColor(file, rank) === 'w' ? 'Q' : 'q'\r\n\r\n  for (let i = 0; i < 8; i++) {\r\n    let f = file + moves[i][0]\r\n    let r = rank + moves[i][1]\r\n    if (!exists(f, r)) {\r\n      continue\r\n    }\r\n    if (canOccupy(f, r, position)) {\r\n      legalMoves.push({\r\n        move: [element, notation(f, r)],\r\n        isCapture: false,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        newCastlingRights: castlingRights\r\n          .replace(kingCastle, '')\r\n          .replace(queenCastle, ''),\r\n        piece: kingCastle,\r\n      })\r\n    }\r\n    if (canCapture(f, r, findColor(file, rank), position)) {\r\n      legalMoves.push({\r\n        move: [element, notation(f, r)],\r\n        isCapture: true,\r\n        isCastle: false,\r\n        isEnPassant: false,\r\n        newCastlingRights: castlingRights\r\n          .replace(kingCastle, '')\r\n          .replace(queenCastle, ''),\r\n        piece: kingCastle,\r\n      })\r\n    }\r\n  }\r\n\r\n  // Handle castling\r\n  if (findElement(file, rank) === 'K') {\r\n    if (castlingRights.includes('K')) {\r\n      //add king side castle move to list\r\n      if (\r\n        canOccupy(5, 7, position) &&\r\n        !causesCheck({ move: ['e1', 'f1'] }, 'w', position) &&\r\n        canOccupy(6, 7, position) &&\r\n        !causesCheck({ move: ['e1', 'g1'] }, 'w', position)\r\n      ) {\r\n        legalMoves.push({\r\n          move: ['e1', 'g1'],\r\n          isCastle: true,\r\n          castleType: 'O-O',\r\n          castleColor: 'w',\r\n          newCastlingRights: castlingRights.replace('K', '').replace('Q', ''),\r\n        })\r\n      }\r\n    }\r\n    if (castlingRights.includes('Q')) {\r\n      //add queen side castle move to list\r\n      if (\r\n        canOccupy(3, 7, position) &&\r\n        !causesCheck({ move: ['e1', 'd1'] }, 'w', position) &&\r\n        canOccupy(2, 7, position) &&\r\n        !causesCheck({ move: ['e1', 'c1'] }, 'w', position)\r\n      ) {\r\n        legalMoves.push({\r\n          move: ['e1', 'c1'],\r\n          isCastle: true,\r\n          castleType: 'O-O-O',\r\n          castleColor: 'w',\r\n          newCastlingRights: castlingRights.replace('K', '').replace('Q', ''),\r\n        })\r\n      }\r\n    }\r\n  }\r\n  if (findElement(file, rank) === 'k') {\r\n    if (castlingRights.includes('k')) {\r\n      //add king side castle move to list\r\n      if (\r\n        canOccupy(5, 0, position) &&\r\n        !causesCheck({ move: ['e8', 'f8'] }, 'b', position) &&\r\n        canOccupy(6, 0, position) &&\r\n        !causesCheck({ move: ['e8', 'g8'] }, 'b', position)\r\n      ) {\r\n        legalMoves.push({\r\n          move: ['e8', 'g8'],\r\n          isCastle: true,\r\n          castleType: 'O-O',\r\n          castleColor: 'b',\r\n          newCastlingRights: castlingRights.replace('k', '').replace('q', ''),\r\n        })\r\n      }\r\n    }\r\n    if (castlingRights.includes('q')) {\r\n      //add queen side castle move to list\r\n      if (\r\n        canOccupy(3, 0, position) &&\r\n        !causesCheck({ move: ['e8', 'd8'] }, 'b', position) &&\r\n        canOccupy(2, 0, position) &&\r\n        !causesCheck({ move: ['e8', 'c8'] }, 'b', position)\r\n      ) {\r\n        legalMoves.push({\r\n          move: ['e8', 'c8'],\r\n          isCastle: true,\r\n          castleType: 'O-O-O',\r\n          castleColor: 'b',\r\n          newCastlingRights: castlingRights.replace('k', '').replace('q', ''),\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  return legalMoves\r\n}\r\n","import bishopMoves from './bishopMoves'\r\nimport rookMoves from './rookMoves'\r\n\r\nexport default function queenMoves(element, position) {\r\n  return bishopMoves(element, position).concat(rookMoves(element, position))\r\n}\r\n","export function parseFENPosition(FEN) {\r\n  let positionStr = FEN.split(' ')[0]\r\n  let position = positionStr.split('/').map((row) => {\r\n    let row2 = []\r\n    for (let i = 0; i < row.length; i++) {\r\n      if (row[i] >= 1 && row[i] <= 8) {\r\n        for (let k = 0; k < parseInt(row[i]); k++) {\r\n          row2.push('')\r\n        }\r\n      } else {\r\n        row2.push(row[i])\r\n      }\r\n    }\r\n    return row2\r\n  })\r\n  return position\r\n}\r\n\r\nexport default function parseFen(fen) {\r\n  const values = fen.split(' ')\r\n  return {\r\n    position: parseFENPosition(fen),\r\n    toMove: values[1],\r\n    castlingRights: values[2],\r\n    enPassantSquare: values[3],\r\n    fiftyMoveRuleCount: parseInt(values[4]),\r\n    moveCount: parseInt(values[5]),\r\n    moves: [],\r\n    legalMoveElements: [],\r\n    selectedElement: null,\r\n  }\r\n}\r\n","export default function createFen(state) {\r\n  function positionToFen(position) {\r\n    let f = ''\r\n    for (let i = 0; i < 8; i++) {\r\n      let count = 0\r\n      for (let j = 0; j < 8; j++) {\r\n        if (position[i][j] === '') {\r\n          count++\r\n        } else {\r\n          if (count !== 0) {\r\n            f = f.concat(count)\r\n            count = 0\r\n          }\r\n          f = f.concat(position[i][j])\r\n        }\r\n      }\r\n      if (count !== 0) {\r\n        f = f.concat(count)\r\n      }\r\n      if (i !== 7) {\r\n        f = f.concat('/')\r\n      }\r\n    }\r\n    return f\r\n  }\r\n\r\n  let fen = `${positionToFen(state.position)} ${state.toMove} ${\r\n    state.castlingRights\r\n  } ${state.enPassantSquare} ${state.fiftyMoveCount} ${state.moveCount}`\r\n\r\n  return fen\r\n}\r\n","export default function moveNotation(moveObj) {\r\n  if (moveObj.isCastle) {\r\n    return moveObj.castleType\r\n  }\r\n  if (moveObj.isEnPassant) {\r\n    return `${moveObj.move[0].charAt(0)}x${moveObj.enPassantSquare}`\r\n  }\r\n  if (moveObj.isPawnMove) {\r\n    if (moveObj.isCapture) {\r\n      return `${moveObj.move[0].charAt(0)}x${moveObj.move[1]}`\r\n    }\r\n    return moveObj.move[1]\r\n  }\r\n  if (moveObj.isCapture) {\r\n    return `${moveObj.piece}x${moveObj.move[1]}`\r\n  }\r\n  return `${moveObj.piece.toUpperCase()}${moveObj.move[1]}`\r\n}\r\n","import React, { useContext, useReducer } from \"react\";\r\nimport legalMoves from \"../chess/moves/pieceMoves/legalMoves\";\r\nimport notation from \"../chess/moves/util/notation\";\r\nimport parseFen from \"../chess/parseFen\";\r\nimport newPosition from \"../chess/newPosition\";\r\nimport createFen from \"../chess/moves/util/createFen\";\r\nimport moveNotation from \"../chess/moves/moveNotation\";\r\n\r\nconst ChessContext = React.createContext();\r\n\r\nconst DEFAULT_FEN = \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\";\r\n\r\nexport function useChess() {\r\n  return useContext(ChessContext);\r\n}\r\n\r\nconst INITIAL_LOCAL_STATE = {\r\n  ...parseFen(DEFAULT_FEN),\r\n  legalMoveElements: [],\r\n  highlightedElements: [],\r\n  legalMoveObjects: [],\r\n  selectedElement: null,\r\n  moveList: [],\r\n  displayedFEN: DEFAULT_FEN,\r\n  isLocal: true,\r\n  whiteTime: 600,\r\n  blackTime: 600,\r\n  FEN: DEFAULT_FEN,\r\n};\r\n\r\nconst INITIAL_ONLINE_STATE = {\r\n  ...parseFen(DEFAULT_FEN),\r\n  legalMoveElements: [],\r\n  highlightedElements: [],\r\n  legalMoveObjects: [],\r\n  selectedElement: null,\r\n  isOnline: true,\r\n  moveList: [],\r\n  displayedFEN: DEFAULT_FEN,\r\n  FEN: DEFAULT_FEN,\r\n  played: false,\r\n  latestMoveObj: null,\r\n};\r\nconst INITIAL_ANALYSIS_STATE = {\r\n  ...parseFen(DEFAULT_FEN),\r\n  legalMoveElements: [],\r\n  highlightedElements: [],\r\n  legalMoveObjects: [],\r\n  selectedElement: null,\r\n  displayedFEN: DEFAULT_FEN,\r\n  moveList: [],\r\n  isAnalysis: true,\r\n  FEN: DEFAULT_FEN,\r\n};\r\n\r\nexport function ChessProvider({ children }) {\r\n  function reducer(state, action) {\r\n    switch (action.type) {\r\n      case \"init\": {\r\n        if (action.payload.type === \"local\") {\r\n          return { ...INITIAL_LOCAL_STATE };\r\n        }\r\n        if (action.payload.type === \"online\") {\r\n          return {\r\n            ...INITIAL_ONLINE_STATE,\r\n            onlineColor: action.payload.onlineColor,\r\n            emitMove: action.payload.emitMove,\r\n          };\r\n        }\r\n        if (action.payload.type === \"analysis\") {\r\n          return { ...INITIAL_ANALYSIS_STATE }; //analysis state\r\n        }\r\n        return state;\r\n      }\r\n      case \"select\": {\r\n        if (action.payload.isBranch) {\r\n          const values = parseFen(state.displayedFEN);\r\n          const getLegalMoves = legalMoves(\r\n            values.position,\r\n            values.toMove,\r\n            values.castlingRights,\r\n            values.enPassantSquare,\r\n            notation(action.payload.element.j, action.payload.element.i)\r\n          );\r\n          return {\r\n            ...state,\r\n            selectedElement: action.payload.element,\r\n            legalMoveObjects: getLegalMoves,\r\n            legalMoveElements: getLegalMoves.map((moveObj) => {\r\n              return moveObj.move[1];\r\n            }),\r\n            highlightedElements: [],\r\n            FEN: state.displayedFEN,\r\n            position: values.position,\r\n            castlingRights: values.castlingRights,\r\n            enPassantSquare: values.enPassantSquare,\r\n            toMove: values.toMove,\r\n            fiftyMoveCount: values.fiftyMoveCount,\r\n            moveCount: values.moveCount,\r\n            moveList:\r\n              state.displayedFEN === DEFAULT_FEN\r\n                ? []\r\n                : state.moveList.slice(\r\n                    0,\r\n                    state.moveList.findIndex(\r\n                      (move) => move.FEN === state.displayedFEN\r\n                    ) + 1\r\n                  ),\r\n          };\r\n        } else {\r\n          const getLegalMoves = legalMoves(\r\n            state.position,\r\n            state.toMove,\r\n            state.castlingRights,\r\n            state.enPassantSquare,\r\n            notation(action.payload.element.j, action.payload.element.i)\r\n          );\r\n          return {\r\n            ...state,\r\n            selectedElement: action.payload.element,\r\n            legalMoveObjects: getLegalMoves,\r\n            legalMoveElements: getLegalMoves.map((moveObj) => {\r\n              return moveObj.move[1];\r\n            }),\r\n            highlightedElements: [],\r\n          };\r\n        }\r\n      }\r\n      case \"deselect\": {\r\n        return {\r\n          ...state,\r\n          legalMoveElements: [],\r\n          legalMoveObjects: [],\r\n          highlightedElements: [],\r\n          selectedElement: null,\r\n        };\r\n      }\r\n      case \"highlight\": {\r\n        return {\r\n          ...state,\r\n          highlightedElements: [\r\n            ...state.highlightedElements,\r\n            action.payload.id,\r\n          ],\r\n        };\r\n      }\r\n      case \"unhighlight\": {\r\n        return {\r\n          ...state,\r\n          highlightedElements: state.highlightedElements.filter(\r\n            (element) => element !== action.payload.id\r\n          ),\r\n        };\r\n      }\r\n      case \"show-previous\": {\r\n        const currentIdx = state.moveList.findIndex(\r\n          (move) => move.FEN === state.displayedFEN\r\n        );\r\n        if (currentIdx > 0) {\r\n          return {\r\n            ...state,\r\n            displayedFEN: state.moveList[currentIdx - 1].FEN,\r\n          };\r\n        } else if (currentIdx === 0) {\r\n          return {\r\n            ...state,\r\n            displayedFEN: DEFAULT_FEN,\r\n          };\r\n        } else {\r\n          return state;\r\n        }\r\n      }\r\n      case \"show-next\": {\r\n        const currentIdx = state.moveList.findIndex(\r\n          (move) => move.FEN === state.displayedFEN\r\n        );\r\n        if (currentIdx !== -1 && currentIdx < state.moveList.length - 1) {\r\n          return {\r\n            ...state,\r\n            displayedFEN: state.moveList[currentIdx + 1].FEN,\r\n          };\r\n        } else if (state.displayedFEN === DEFAULT_FEN) {\r\n          return {\r\n            ...state,\r\n            displayedFEN: state.moveList[0].FEN,\r\n          };\r\n        } else {\r\n          return state;\r\n        }\r\n      }\r\n      case \"move\": {\r\n        const resultingPosition = newPosition(\r\n          action.payload.moveObj,\r\n          state.position\r\n        );\r\n        const nextMove = state.toMove === \"w\" ? \"b\" : \"w\";\r\n        const newMoveCount =\r\n          state.toMove === \"w\" ? state.moveCount + 1 : state.moveCount;\r\n        const newFifty =\r\n          !action.payload.moveObj.isCapture &&\r\n          !action.payload.moveObj.isPawnMove\r\n            ? state.fiftyMoveCount + 1\r\n            : state.fiftyMoveCount;\r\n        const newEnPassantSquare =\r\n          action.payload.moveObj.newEnPassantSquare || \"-\";\r\n        const newCastlingRights =\r\n          action.payload.moveObj.castlingRights || state.castlingRights;\r\n        const newFEN = createFen({\r\n          position: resultingPosition,\r\n          toMove: nextMove,\r\n          moveCount: newMoveCount,\r\n          fiftyMoveCount: newFifty,\r\n          enPassantSquare: newEnPassantSquare,\r\n          castlingRights: newCastlingRights,\r\n        });\r\n\r\n        return {\r\n          ...state,\r\n          FEN: newFEN,\r\n          position: resultingPosition,\r\n          highlightedElements: [],\r\n          legalMoveElements: [],\r\n          legalMoveObjects: [],\r\n          selectedElement: null,\r\n          castlingRights: newCastlingRights,\r\n          enPassantSquare: newEnPassantSquare,\r\n          moveCount: newMoveCount,\r\n          toMove: nextMove,\r\n          fiftyMoveCount: newFifty,\r\n          moveList: [\r\n            ...state.moveList,\r\n            { move: moveNotation(action.payload.moveObj), FEN: newFEN },\r\n          ],\r\n          displayedFEN: newFEN,\r\n          played: true,\r\n          latestMoveObj: action.payload.moveObj,\r\n        };\r\n      }\r\n      case \"receive-move\": {\r\n        console.log(\"reducer recieve move\");\r\n        const resultingPosition = newPosition(\r\n          action.payload.moveObj,\r\n          state.position\r\n        );\r\n        const nextMove = state.toMove === \"w\" ? \"b\" : \"w\";\r\n        const newMoveCount =\r\n          state.toMove === \"w\" ? state.moveCount + 1 : state.moveCount;\r\n        const newFifty =\r\n          !action.payload.moveObj.isCapture &&\r\n          !action.payload.moveObj.isPawnMove\r\n            ? state.fiftyMoveCount + 1\r\n            : state.fiftyMoveCount;\r\n        const newEnPassantSquare =\r\n          action.payload.moveObj.newEnPassantSquare || \"-\";\r\n        const newCastlingRights =\r\n          action.payload.moveObj.castlingRights || state.castlingRights;\r\n        const newFEN = createFen({\r\n          position: resultingPosition,\r\n          toMove: nextMove,\r\n          moveCount: newMoveCount,\r\n          fiftyMoveCount: newFifty,\r\n          enPassantSquare: newEnPassantSquare,\r\n          castlingRights: newCastlingRights,\r\n        });\r\n        return {\r\n          ...state,\r\n          FEN: newFEN,\r\n          position: resultingPosition,\r\n          highlightedElements: [],\r\n          legalMoveElements: [],\r\n          legalMoveObjects: [],\r\n          selectedElement: null,\r\n          castlingRights: newCastlingRights,\r\n          enPassantSquare: newEnPassantSquare,\r\n          moveCount: newMoveCount,\r\n          toMove: nextMove,\r\n          fiftyMoveCount: newFifty,\r\n          moveList: [\r\n            ...state.moveList,\r\n            { move: moveNotation(action.payload.moveObj), FEN: newFEN },\r\n          ],\r\n          displayedFEN: newFEN,\r\n        };\r\n      }\r\n      case \"emitted\": {\r\n        return { ...state, played: false };\r\n      }\r\n      case \"reset\": {\r\n        if (state.isLocal) {\r\n          return { ...INITIAL_LOCAL_STATE };\r\n        }\r\n        if (state.isOnline) {\r\n          return { ...INITIAL_ONLINE_STATE };\r\n        }\r\n        if (state.isAnalysis) {\r\n          return { ...INITIAL_ANALYSIS_STATE };\r\n        }\r\n\r\n        return state;\r\n      }\r\n      default: {\r\n        console.log(\"reducer default state\");\r\n        console.log(action);\r\n        return state;\r\n      }\r\n    }\r\n  }\r\n  const [state, dispatch] = useReducer(reducer, {});\r\n\r\n  const value = {\r\n    state,\r\n    dispatch,\r\n  };\r\n  return (\r\n    <ChessContext.Provider value={value}>{children}</ChessContext.Provider>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/black-pawn.c9d3820c.svg\";","import p from '../../../assets/black-pawn.svg'\r\nimport r from '../../../assets/black-rook.svg'\r\nimport n from '../../../assets/black-knight.svg'\r\nimport b from '../../../assets/black-bishop.svg'\r\nimport k from '../../../assets/black-king.svg'\r\nimport q from '../../../assets/black-queen.svg'\r\nimport P from '../../../assets/white-pawn.svg'\r\nimport R from '../../../assets/white-rook.svg'\r\nimport N from '../../../assets/white-knight.svg'\r\nimport B from '../../../assets/white-bishop.svg'\r\nimport K from '../../../assets/white-king.svg'\r\nimport Q from '../../../assets/white-queen.svg'\r\n\r\nconst pieces = { p, r, n, b, k, q, P, R, N, B, K, Q }\r\n\r\nexport default pieces\r\n","export default __webpack_public_path__ + \"static/media/black-rook.789e6d00.svg\";","export default __webpack_public_path__ + \"static/media/black-knight.f3a35b25.svg\";","export default __webpack_public_path__ + \"static/media/black-bishop.f234573a.svg\";","export default __webpack_public_path__ + \"static/media/black-king.f3deed09.svg\";","export default __webpack_public_path__ + \"static/media/black-queen.4dc242ad.svg\";","export default __webpack_public_path__ + \"static/media/white-pawn.8ef9ae1b.svg\";","export default __webpack_public_path__ + \"static/media/white-rook.c818fb9c.svg\";","export default __webpack_public_path__ + \"static/media/white-knight.da32ceb2.svg\";","export default __webpack_public_path__ + \"static/media/white-bishop.b3c514cb.svg\";","export default __webpack_public_path__ + \"static/media/white-king.ea20c759.svg\";","export default __webpack_public_path__ + \"static/media/white-queen.11dddff4.svg\";","export default function findColor(piece) {\r\n  if (piece === '') {\r\n    return\r\n  }\r\n  if (piece === piece.toLowerCase()) {\r\n    return 'b'\r\n  } else if (piece === piece.toUpperCase()) {\r\n    return 'w'\r\n  }\r\n}\r\n","import React, { useState, useRef } from 'react'\r\nimport pieces from './pieces'\r\n\r\nimport { useChess } from '../../contexts/ChessContext'\r\nimport notation from '../moves/util/notation'\r\nimport findColor from '../moves/util/findColor'\r\nimport idToCoordinates from '../moves/util/idToCoordinates'\r\n\r\nexport default function Piece({ piece, i, j, boardRef }) {\r\n  const id = notation(j, i)\r\n  const { state, dispatch } = useChess()\r\n  const pieceRef = useRef()\r\n\r\n  const toMove = state.displayedFEN.split(' ')[1]\r\n\r\n  function handlePieceClick() {\r\n    if (findColor(piece) === toMove) {\r\n      if (state.onlineColor && state.onlineColor !== toMove) {\r\n        console.log('not your move')\r\n        return\r\n      }\r\n      dispatch({\r\n        type: 'select',\r\n        payload: {\r\n          element: { piece, i, j },\r\n          isBranch: state.FEN !== state.displayedFEN,\r\n        },\r\n      })\r\n    } else if (state.legalMoveElements.includes(id)) {\r\n      const moveObj = state.legalMoveObjects.find(\r\n        (moveObj) =>\r\n          moveObj.move[0] ===\r\n            notation(state.selectedElement.j, state.selectedElement.i) &&\r\n          moveObj.move[1] === id\r\n      )\r\n      dispatch({\r\n        type: 'move',\r\n        payload: { moveObj },\r\n      })\r\n    } else {\r\n      dispatch({ type: 'deselect' })\r\n    }\r\n  }\r\n\r\n  const [isClicked, setIsClicked] = useState(false)\r\n  const [startLocation, setStartLocation] = useState()\r\n\r\n  function translateTarget(id) {\r\n    let [file, rank] = idToCoordinates(id)\r\n    return `translate(${(file * boardRef.current.width) / 8}px,${\r\n      (rank * boardRef.current.width) / 8\r\n    }px)`\r\n  }\r\n\r\n  function mouseDown(e) {\r\n    if (findColor(e.target.id) !== toMove) {\r\n      return\r\n    }\r\n    e.target.classList.add('dragging')\r\n    if (state.onlineColor && state.onlineColor !== toMove) {\r\n      console.log('not your move')\r\n      return\r\n    }\r\n\r\n    dispatch({\r\n      type: 'select',\r\n      payload: {\r\n        element: { piece, i, j },\r\n        isBranch: state.FEN !== state.displayedFEN,\r\n      },\r\n    })\r\n\r\n    setIsClicked(true)\r\n    setStartLocation(id)\r\n  }\r\n  function mouseUp(e) {\r\n    let element = e.target\r\n    element.classList.remove('dragging')\r\n    if (isClicked) {\r\n      setIsClicked(false)\r\n      let targetSquare = document\r\n        .elementsFromPoint(e.clientX, e.clientY)\r\n        .find((element) => element.classList.contains('square'))\r\n      if (targetSquare.classList.contains('legal')) {\r\n        element.style.transform = translateTarget(targetSquare.id)\r\n        setStartLocation(targetSquare.id)\r\n        const moveObj = state.legalMoveObjects.find(\r\n          (moveObj) =>\r\n            moveObj.move[0] ===\r\n              notation(state.selectedElement.j, state.selectedElement.i) &&\r\n            moveObj.move[1] === targetSquare.id\r\n        )\r\n        dispatch({\r\n          type: 'move',\r\n          payload: { moveObj },\r\n        })\r\n      } else {\r\n        const [j, i] = idToCoordinates(startLocation)\r\n        element.style.transform = `translate(${j}00%,${i}00%)`\r\n      }\r\n    }\r\n  }\r\n  function mouseMove(e) {\r\n    let element = e.target\r\n    let board = document.querySelector('.board')\r\n    let boardX = board.offsetLeft\r\n    let boardY = board.offsetTop\r\n    if (isClicked) {\r\n      let mouseX = e.clientX - boardX\r\n      let mouseY = e.clientY - boardY\r\n      let x = mouseX - pieceRef.current.width / 2\r\n      let y = mouseY - pieceRef.current.width / 2\r\n      element.style.transform = `translate(${x}px,${y}px)`\r\n    }\r\n  }\r\n\r\n  return (\r\n    <img\r\n      onContextMenu={(e) => {\r\n        e.preventDefault()\r\n        if (state.highlightedElements.includes(id)) {\r\n          dispatch({ type: 'unhighlight', payload: { id } })\r\n        } else {\r\n          dispatch({ type: 'highlight', payload: { id } })\r\n        }\r\n      }}\r\n      id={piece}\r\n      src={`${pieces[piece]}`}\r\n      alt=''\r\n      style={{ transform: `translate(${j}00%,${i}00%)` }}\r\n      onClick={handlePieceClick}\r\n      draggable={false}\r\n      onMouseDown={mouseDown}\r\n      onMouseUp={mouseUp}\r\n      onMouseMove={mouseMove}\r\n      ref={pieceRef}\r\n    />\r\n  )\r\n}\r\n","import React, { useRef } from 'react'\r\nimport Piece from './Piece'\r\nimport notation from '../moves/util/notation'\r\n\r\nimport { useChess } from '../../contexts/ChessContext'\r\nimport { parseFENPosition } from '../parseFen'\r\n\r\nexport default function Board() {\r\n  const { dispatch, state } = useChess()\r\n\r\n  const position = parseFENPosition(state.displayedFEN)\r\n\r\n  const boardRef = useRef()\r\n\r\n  function handleRightClick(id) {\r\n    if (state.highlightedElements.includes(id)) {\r\n      dispatch({ type: 'unhighlight', payload: { id } })\r\n    } else {\r\n      dispatch({ type: 'highlight', payload: { id } })\r\n    }\r\n  }\r\n\r\n  function handleClick(id) {\r\n    if (!state.legalMoveElements.includes(id)) {\r\n      dispatch({ type: 'deselect' })\r\n      return\r\n    }\r\n\r\n    const moveObj = state.legalMoveObjects.find(\r\n      (moveObj) =>\r\n        moveObj.move[0] ===\r\n          notation(state.selectedElement.j, state.selectedElement.i) &&\r\n        moveObj.move[1] === id\r\n    )\r\n    dispatch({\r\n      type: 'move',\r\n      payload: { moveObj },\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className='board' ref={boardRef}>\r\n        {position.map((row, rowIdx) => {\r\n          // eslint-disable-next-line array-callback-return\r\n          return row.map((square, colIdx) => {\r\n            if (square) {\r\n              return (\r\n                <Piece\r\n                  key={rowIdx * 8 + colIdx}\r\n                  piece={square}\r\n                  i={rowIdx}\r\n                  j={colIdx}\r\n                  boardRef={boardRef}\r\n                />\r\n              )\r\n            }\r\n          })\r\n        })}\r\n        {position.map((row, rowIdx) => {\r\n          return row.map((square, colIdx) => {\r\n            const id = notation(colIdx, rowIdx)\r\n            return (\r\n              <div\r\n                onContextMenu={(e) => {\r\n                  e.preventDefault()\r\n                  handleRightClick(id)\r\n                }}\r\n                onClick={() => handleClick(id)}\r\n                id={id}\r\n                key={rowIdx * 8 + colIdx}\r\n                className={`square ${\r\n                  (rowIdx + colIdx) % 2 ? 'dark' : 'light'\r\n                } ${state.legalMoveElements.includes(id) ? 'legal' : ''} ${\r\n                  state.highlightedElements.includes(id) ? 'highlighted' : ''\r\n                }`}\r\n              ></div>\r\n            )\r\n          })\r\n        })}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useChess } from '../../contexts/ChessContext'\r\n\r\nexport default function Details({ isAnalysis }) {\r\n  const { state, dispatch } = useChess()\r\n  const moves = state.moveList.map((obj) => obj.move)\r\n\r\n  function handleForward() {\r\n    dispatch({ type: 'show-next' })\r\n  }\r\n\r\n  function handleBackward() {\r\n    dispatch({ type: 'show-previous' })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className='details hide-for-mobile'>\r\n        <span className='top-border'>Moves</span>\r\n        <div className='grid-cont'>\r\n          {moves.map((move, idx) => {\r\n            if (idx % 2 === 0) {\r\n              return (\r\n                <React.Fragment key={idx}>\r\n                  <p>{idx / 2 + 1}</p>\r\n                  <button className='move btn'>{move}</button>\r\n                </React.Fragment>\r\n              )\r\n            }\r\n            return (\r\n              <button key={idx} className='move btn'>\r\n                {move}\r\n              </button>\r\n            )\r\n          })}\r\n        </div>\r\n        {isAnalysis && (\r\n          <div className='controls flex flex-jc-c'>\r\n            <div\r\n              className='btn forward flex flex-jc-c flex-ai-c'\r\n              onClick={handleBackward}\r\n            >\r\n              <div className='vertical-line'></div>\r\n              <div className='triangle-left'></div>\r\n            </div>\r\n            <div\r\n              className='btn backward flex flex-jc-c flex-ai-c'\r\n              onClick={handleForward}\r\n            >\r\n              <div className='triangle-right'></div>\r\n              <div className='vertical-line'></div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import legalMoves from './pieceMoves/legalMoves'\r\nimport isInCheck from './isInCheck'\r\nimport parseFen from '../parseFen'\r\n\r\nexport default function isMate(FEN) {\r\n  function parseFENPosition(FEN) {\r\n    var position = FEN.split('')\r\n      .reverse()\r\n      .join('')\r\n      .split('/')\r\n      .map((row) => {\r\n        let row2 = []\r\n        for (let i = 0; i < row.length; i++) {\r\n          if (row[i] >= 1 && row[i] <= 8) {\r\n            for (let k = 0; k < parseInt(row[i]); k++) {\r\n              row2.push('')\r\n            }\r\n          } else {\r\n            row2.push(row[i])\r\n          }\r\n        }\r\n        return row2\r\n      })\r\n    return position\r\n  }\r\n  let values = FEN.split(' ')\r\n\r\n  let position = parseFENPosition(values[0])\r\n  let toMove = values[1]\r\n\r\n  function findColor(piece) {\r\n    if (piece.toLowerCase() === piece) {\r\n      return 'b'\r\n    }\r\n    if (piece.toUpperCase() === piece) {\r\n      return 'w'\r\n    }\r\n  }\r\n\r\n  function id(file, rank) {\r\n    let files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']\r\n    return `${files[7 - file]}${rank + 1}`\r\n  }\r\n  let moves = []\r\n  position.forEach((row, idx1) => {\r\n    row.forEach((square, idx2) => {\r\n      if (square !== '' && findColor(square) === toMove) {\r\n        const values = parseFen(FEN)\r\n        moves = moves.concat(\r\n          legalMoves(\r\n            values.position,\r\n            values.toMove,\r\n            values.castlingRights,\r\n            values.enPassantSquare,\r\n            id(idx2, idx1)\r\n          )\r\n        )\r\n      }\r\n    })\r\n  })\r\n\r\n  if (moves.length === 0) {\r\n    if (isInCheck(toMove, position)) {\r\n      return 'Checkmate'\r\n    } else {\r\n      return 'Stalemate'\r\n    }\r\n  }\r\n  return\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useChess } from '../../contexts/ChessContext'\r\nimport Board from './Board'\r\nimport Details from './Details'\r\nimport isMate from '../moves/isMate'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nexport default function PlayOnline() {\r\n  const { state } = useChess()\r\n\r\n  const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    if (!state.toMove) {\r\n      return\r\n    }\r\n    if (isMate(state.FEN) === 'Checkmate') {\r\n      alert(`${state.toMove} won by checkmate`)\r\n      history.push('/')\r\n    }\r\n    if (isMate(state.FEN) === 'Stalemate') {\r\n      alert(`Draw by stalemate`)\r\n      history.push('/')\r\n    }\r\n  }, [state.toMove])\r\n\r\n  return (\r\n    <div className='online'>\r\n      {state.onlineColor && (\r\n        <>\r\n          <Board />\r\n          <Details isAnalysis={false} />\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/loading.83a9d0c8.svg\";","import React from \"react\";\r\nimport loading from \"../assets/loading.svg\";\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <div className='loading'>\r\n      <img src={loading} className='App-logo' alt='logo' />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\n\r\nexport function format(time) {\r\n  // Hours, minutes and seconds\r\n  var hrs = ~~(time / 3600)\r\n  var mins = ~~((time % 3600) / 60)\r\n  var secs = ~~time % 60\r\n\r\n  // Output like \"1:01\" or \"4:03:59\" or \"123:03:59\"\r\n  var ret = ''\r\n  if (hrs > 0) {\r\n    ret += '' + hrs + ':' + (mins < 10 ? '0' : '')\r\n  }\r\n  ret += '' + mins + ':' + (secs < 10 ? '0' : '')\r\n  ret += '' + secs\r\n  return ret\r\n}\r\n\r\nexport default function Time({ time }) {\r\n  return <>{format(time)}</>\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport Board from '../chess-components/Board'\r\nimport { useChess } from '../../contexts/ChessContext'\r\nimport Details from './Details'\r\nimport Loading from '../../Loading'\r\nimport Time from './Time'\r\nimport isMate from '../moves/isMate'\r\n\r\nexport default function PlayLocal() {\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const { dispatch, state } = useChess()\r\n\r\n  const [whiteTimer, setWhiteTimer] = useState()\r\n  const [blackTimer, setBlackTimer] = useState()\r\n  const [whiteTime, setWhiteTime] = useState(600)\r\n  const [blackTime, setBlackTime] = useState(600)\r\n\r\n  function whiteDecrement() {\r\n    setWhiteTime((t) => t - 1)\r\n  }\r\n  function blackDecrement() {\r\n    setBlackTime((t) => t - 1)\r\n  }\r\n\r\n  function moveStart(color) {\r\n    if (color === 'w') {\r\n      const whiteTimerVar = setInterval(whiteDecrement, 1000)\r\n      setWhiteTimer(whiteTimerVar)\r\n    } else {\r\n      const blackTimerVar = setInterval(blackDecrement, 1000)\r\n      setBlackTimer(blackTimerVar)\r\n    }\r\n  }\r\n\r\n  function moveStop(color) {\r\n    if (color === 'w') {\r\n      clearInterval(whiteTimer)\r\n    } else {\r\n      clearInterval(blackTimer)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (whiteTime < 0) {\r\n      alert('Black won by timeout')\r\n      setBlackTime(600)\r\n      setWhiteTime(600)\r\n      dispatch({ type: 'reset' })\r\n      return\r\n    } else if (blackTime < 0) {\r\n      alert('Black won by timeout')\r\n      setBlackTime(600)\r\n      setWhiteTime(600)\r\n      dispatch({ type: 'reset' })\r\n      return\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [whiteTime, blackTime])\r\n\r\n  useEffect(() => {\r\n    if (!state.FEN) {\r\n      return\r\n    }\r\n    if (isMate(state.FEN) === 'Checkmate') {\r\n      alert(`${state.toMove} won by checkmate`)\r\n      dispatch({ type: 'reset' })\r\n    }\r\n    if (isMate(state.FEN) === 'Stalemate') {\r\n      alert(`Draw by stalemate`)\r\n      dispatch({ type: 'reset' })\r\n    }\r\n    moveStart(state.toMove)\r\n    moveStop(state.toMove === 'w' ? 'b' : 'w')\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [state.toMove])\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: 'init', payload: { type: 'local' } })\r\n    setIsLoading(false)\r\n  }, [])\r\n\r\n  return (\r\n    <div className='local'>\r\n      {isLoading ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          <div className='local__board'>\r\n            <div className='black time'>\r\n              <Time time={blackTime} />\r\n            </div>\r\n            <Board />\r\n            <div className='white time'>\r\n              <Time time={whiteTime} />\r\n            </div>\r\n          </div>\r\n\r\n          <Details />\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport Board from '../chess-components/Board'\r\nimport { useChess } from '../../contexts/ChessContext'\r\nimport Details from './Details'\r\nimport Loading from '../../Loading'\r\n\r\nexport default function Analysis() {\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const { dispatch } = useChess()\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: 'init', payload: { type: 'analysis' } })\r\n    setIsLoading(false)\r\n  }, [])\r\n\r\n  return (\r\n    <div className='analysis'>\r\n      {isLoading ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          <Board />\r\n          <Details isAnalysis={true} />\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useUser } from '../contexts/UserContext'\r\n\r\nexport default function Profile() {\r\n  const { logout } = useUser()\r\n  return (\r\n    <>\r\n      <button onClick={() => logout()}>Log Out</button>\r\n    </>\r\n  )\r\n}\r\n","import React, { useState, useContext, useEffect } from 'react'\r\nimport { useChess } from './ChessContext'\r\nimport { useUser } from './UserContext'\r\nimport Loading from '../Loading'\r\nimport io from 'socket.io-client'\r\n\r\nconst SocketContext = React.createContext()\r\n\r\nexport function useSocket() {\r\n  return useContext(SocketContext)\r\n}\r\n\r\nexport function SocketProvider({ children }) {\r\n  const { user } = useUser()\r\n  const { dispatch, state } = useChess()\r\n  const [socket, setSocket] = useState()\r\n  const [roomID, setRoomID] = useState()\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  function playMove(moveObj) {\r\n    console.log('emitting move to server...')\r\n    dispatch({ type: 'emitted' })\r\n    socket?.emit('move', roomID, moveObj)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!state.played) {\r\n      return\r\n    }\r\n    if (state.played === true) {\r\n      playMove(state.latestMoveObj)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [state.played])\r\n\r\n  useEffect(() => {\r\n      const newSocket = io(process.env.REACT_APP_SERVER_URL, {\r\n      query: { id: user._id },\r\n    })\r\n\r\n    setSocket(newSocket)\r\n\r\n    newSocket.emit('join-room')\r\n    setIsLoading(true)\r\n\r\n    return () => newSocket.close()\r\n  }, [user])\r\n\r\n  useEffect(() => {\r\n    if (!socket) {\r\n      return\r\n    }\r\n    socket.on('init', (roomID, color) => {\r\n      setRoomID(roomID)\r\n      dispatch({\r\n        type: 'init',\r\n        payload: { type: 'online', emitMove: playMove, onlineColor: color },\r\n      })\r\n    })\r\n\r\n    socket.on('begin', () => {\r\n      setIsLoading(false)\r\n    })\r\n\r\n    socket.on('make-move', (moveObj) => {\r\n      console.log('socket receive move')\r\n      dispatch({ type: 'receive-move', payload: { moveObj } })\r\n    })\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [socket])\r\n\r\n  const value = {\r\n    playMove,\r\n  }\r\n\r\n  return (\r\n    <SocketContext.Provider value={value}>\r\n      {isLoading ? <Loading /> : children}\r\n    </SocketContext.Provider>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { SocketProvider } from '../contexts/SocketContext'\r\nimport { useUser } from '../contexts/UserContext'\r\nimport NavBar from '../NavBar'\r\n\r\nexport default function PrivateSocket({ component: Component, ...rest }) {\r\n  const { user } = useUser()\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return user ? (\r\n          <>\r\n            <NavBar />\r\n            <SocketProvider>\r\n              <Component {...props} />\r\n            </SocketProvider>\r\n          </>\r\n        ) : (\r\n          <Redirect to='/login' />\r\n        )\r\n      }}\r\n    ></Route>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { BrowserRouter as Router, Switch } from 'react-router-dom'\r\nimport '../scss/styles.scss'\r\nimport Login from './auth/Login'\r\nimport Signup from './auth/Signup'\r\nimport Dashboard from './dashboard/Dashboard'\r\nimport PrivateRoute from './routes/PrivateRoute'\r\nimport PublicRoute from './routes/PublicRoute'\r\nimport NavRoute from './routes/NavRoute'\r\nimport { UserProvider } from './contexts/UserContext'\r\nimport PlayOnline from './chess/chess-components/PlayOnline'\r\nimport PlayLocal from './chess/chess-components/PlayLocal'\r\nimport Analysis from './chess/chess-components/Analysis'\r\nimport Profile from './dashboard/Profile'\r\nimport { ChessProvider } from './contexts/ChessContext'\r\nimport PrivateSocket from './routes/PrivateSocket'\r\n\r\nexport default function App() {\r\n  return (\r\n    <>\r\n      <Router>\r\n        <Switch>\r\n          <UserProvider>\r\n            <PublicRoute path='/login' component={Login} />\r\n            <PublicRoute path='/signup' component={Signup} />\r\n            <NavRoute path='/' exact component={Dashboard} />\r\n            <PrivateRoute path='/profile' exact component={Profile} />\r\n            <ChessProvider>\r\n              <PrivateSocket path='/play-online' component={PlayOnline} />\r\n              <PrivateRoute path='/play-local' component={PlayLocal} />\r\n              <PrivateRoute path='/analysis' component={Analysis} />\r\n            </ChessProvider>\r\n          </UserProvider>\r\n        </Switch>\r\n      </Router>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport App from './components/App'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.querySelector('#root')\r\n)\r\n"],"sourceRoot":""}